"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/gamification/progress/route";
exports.ids = ["app/api/gamification/progress/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgamification%2Fprogress%2Froute&page=%2Fapi%2Fgamification%2Fprogress%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgamification%2Fprogress%2Froute.ts&appDir=D%3A%5Cmini_adhd1%5Cmini_adhd%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cmini_adhd1%5Cmini_adhd&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgamification%2Fprogress%2Froute&page=%2Fapi%2Fgamification%2Fprogress%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgamification%2Fprogress%2Froute.ts&appDir=D%3A%5Cmini_adhd1%5Cmini_adhd%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cmini_adhd1%5Cmini_adhd&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_mini_adhd1_mini_adhd_app_api_gamification_progress_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/gamification/progress/route.ts */ \"(rsc)/./app/api/gamification/progress/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/gamification/progress/route\",\n        pathname: \"/api/gamification/progress\",\n        filename: \"route\",\n        bundlePath: \"app/api/gamification/progress/route\"\n    },\n    resolvedPagePath: \"D:\\\\mini_adhd1\\\\mini_adhd\\\\app\\\\api\\\\gamification\\\\progress\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_mini_adhd1_mini_adhd_app_api_gamification_progress_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/gamification/progress/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnYW1pZmljYXRpb24lMkZwcm9ncmVzcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZ2FtaWZpY2F0aW9uJTJGcHJvZ3Jlc3MlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZnYW1pZmljYXRpb24lMkZwcm9ncmVzcyUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDbWluaV9hZGhkMSU1Q21pbmlfYWRoZCU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9RCUzQSU1Q21pbmlfYWRoZDElNUNtaW5pX2FkaGQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3FCO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9jdXNmbG93Lz9jNGI1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkQ6XFxcXG1pbmlfYWRoZDFcXFxcbWluaV9hZGhkXFxcXGFwcFxcXFxhcGlcXFxcZ2FtaWZpY2F0aW9uXFxcXHByb2dyZXNzXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nYW1pZmljYXRpb24vcHJvZ3Jlc3Mvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9nYW1pZmljYXRpb24vcHJvZ3Jlc3NcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2dhbWlmaWNhdGlvbi9wcm9ncmVzcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkQ6XFxcXG1pbmlfYWRoZDFcXFxcbWluaV9hZGhkXFxcXGFwcFxcXFxhcGlcXFxcZ2FtaWZpY2F0aW9uXFxcXHByb2dyZXNzXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9nYW1pZmljYXRpb24vcHJvZ3Jlc3Mvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgamification%2Fprogress%2Froute&page=%2Fapi%2Fgamification%2Fprogress%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgamification%2Fprogress%2Froute.ts&appDir=D%3A%5Cmini_adhd1%5Cmini_adhd%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cmini_adhd1%5Cmini_adhd&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/gamification/progress/route.ts":
/*!************************************************!*\
  !*** ./app/api/gamification/progress/route.ts ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./lib/auth.ts\");\n/* harmony import */ var _lib_gamification_achievements__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/gamification/achievements */ \"(rsc)/./lib/gamification/achievements.ts\");\n\n\n\n\nasync function GET(req) {\n    try {\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.connectToDatabase)();\n        const claims = (0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.getUserFromCookie)();\n        if (!claims) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Unauthorized\"\n        }, {\n            status: 401\n        });\n        const progress = await _lib_gamification_achievements__WEBPACK_IMPORTED_MODULE_3__.achievementSystem.getUserProgress(claims.userId);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            progress\n        });\n    } catch (error) {\n        console.error(\"Error fetching progress:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2dhbWlmaWNhdGlvbi9wcm9ncmVzcy9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUF1RDtBQUNYO0FBQ0U7QUFDcUI7QUFFNUQsZUFBZUksSUFBSUMsR0FBZ0I7SUFDeEMsSUFBSTtRQUNGLE1BQU1KLDBEQUFpQkE7UUFDdkIsTUFBTUssU0FBU0osNERBQWlCQTtRQUNoQyxJQUFJLENBQUNJLFFBQVEsT0FBT04scURBQVlBLENBQUNPLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQWUsR0FBRztZQUFFQyxRQUFRO1FBQUk7UUFFL0UsTUFBTUMsV0FBVyxNQUFNUCw2RUFBaUJBLENBQUNRLGVBQWUsQ0FBQ0wsT0FBT00sTUFBTTtRQUV0RSxPQUFPWixxREFBWUEsQ0FBQ08sSUFBSSxDQUFDO1lBQUVHO1FBQVM7SUFDdEMsRUFBRSxPQUFPRixPQUFPO1FBQ2RLLFFBQVFMLEtBQUssQ0FBQyw0QkFBNEJBO1FBQzFDLE9BQU9SLHFEQUFZQSxDQUFDTyxJQUFJLENBQUM7WUFBRUMsT0FBTztRQUF3QixHQUFHO1lBQUVDLFFBQVE7UUFBSTtJQUM3RTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9jdXNmbG93Ly4vYXBwL2FwaS9nYW1pZmljYXRpb24vcHJvZ3Jlc3Mvcm91dGUudHM/MTU2MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXHJcbmltcG9ydCB7IGNvbm5lY3RUb0RhdGFiYXNlIH0gZnJvbSAnQC9saWIvZGInXHJcbmltcG9ydCB7IGdldFVzZXJGcm9tQ29va2llIH0gZnJvbSAnQC9saWIvYXV0aCdcclxuaW1wb3J0IHsgYWNoaWV2ZW1lbnRTeXN0ZW0gfSBmcm9tICdAL2xpYi9nYW1pZmljYXRpb24vYWNoaWV2ZW1lbnRzJ1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IE5leHRSZXF1ZXN0KSB7XHJcbiAgdHJ5IHtcclxuICAgIGF3YWl0IGNvbm5lY3RUb0RhdGFiYXNlKClcclxuICAgIGNvbnN0IGNsYWltcyA9IGdldFVzZXJGcm9tQ29va2llPHsgdXNlcklkOiBzdHJpbmcgfT4oKVxyXG4gICAgaWYgKCFjbGFpbXMpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnVW5hdXRob3JpemVkJyB9LCB7IHN0YXR1czogNDAxIH0pXHJcblxyXG4gICAgY29uc3QgcHJvZ3Jlc3MgPSBhd2FpdCBhY2hpZXZlbWVudFN5c3RlbS5nZXRVc2VyUHJvZ3Jlc3MoY2xhaW1zLnVzZXJJZClcclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBwcm9ncmVzcyB9KVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwcm9ncmVzczonLCBlcnJvcilcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LCB7IHN0YXR1czogNTAwIH0pXHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjb25uZWN0VG9EYXRhYmFzZSIsImdldFVzZXJGcm9tQ29va2llIiwiYWNoaWV2ZW1lbnRTeXN0ZW0iLCJHRVQiLCJyZXEiLCJjbGFpbXMiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJwcm9ncmVzcyIsImdldFVzZXJQcm9ncmVzcyIsInVzZXJJZCIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/gamification/progress/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/auth.ts":
/*!*********************!*\
  !*** ./lib/auth.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clearAuthCookie: () => (/* binding */ clearAuthCookie),\n/* harmony export */   getUserFromCookie: () => (/* binding */ getUserFromCookie),\n/* harmony export */   setAuthCookie: () => (/* binding */ setAuthCookie),\n/* harmony export */   signJwt: () => (/* binding */ signJwt),\n/* harmony export */   verifyJwt: () => (/* binding */ verifyJwt)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n\nconst JWT_SECRET = process.env.JWT_SECRET;\nconst COOKIE_NAME = \"focusflow_token\";\nfunction signJwt(payload, expiresIn = \"7d\") {\n    if (!JWT_SECRET) throw new Error(\"JWT_SECRET is not set. Add it to .env.local and restart the dev server.\");\n    return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, JWT_SECRET, {\n        expiresIn\n    });\n}\nfunction verifyJwt(token) {\n    try {\n        if (!JWT_SECRET) return null;\n        return jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n    } catch  {\n        return null;\n    }\n}\nfunction setAuthCookie(token) {\n    (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)().set(COOKIE_NAME, token, {\n        httpOnly: true,\n        secure: true,\n        sameSite: \"lax\",\n        path: \"/\",\n        maxAge: 60 * 60 * 24 * 7\n    });\n}\nfunction clearAuthCookie() {\n    (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)().set(COOKIE_NAME, \"\", {\n        httpOnly: true,\n        expires: new Date(0),\n        path: \"/\"\n    });\n}\nfunction getUserFromCookie() {\n    const token = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)().get(COOKIE_NAME)?.value;\n    if (!token) return null;\n    return verifyJwt(token);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYXV0aC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUE4QjtBQUNRO0FBRXRDLE1BQU1FLGFBQWFDLFFBQVFDLEdBQUcsQ0FBQ0YsVUFBVTtBQUN6QyxNQUFNRyxjQUFjO0FBRWIsU0FBU0MsUUFBUUMsT0FBZSxFQUFFQyxZQUFvQixJQUFJO0lBQy9ELElBQUksQ0FBQ04sWUFBWSxNQUFNLElBQUlPLE1BQU07SUFDakMsT0FBT1Qsd0RBQVEsQ0FBQ08sU0FBU0wsWUFBWTtRQUFFTTtJQUFVO0FBQ25EO0FBRU8sU0FBU0csVUFBbUJDLEtBQWE7SUFDOUMsSUFBSTtRQUNGLElBQUksQ0FBQ1YsWUFBWSxPQUFPO1FBQ3hCLE9BQU9GLDBEQUFVLENBQUNZLE9BQU9WO0lBQzNCLEVBQUUsT0FBTTtRQUNOLE9BQU87SUFDVDtBQUNGO0FBRU8sU0FBU1ksY0FBY0YsS0FBYTtJQUN6Q1gscURBQU9BLEdBQUdjLEdBQUcsQ0FBQ1YsYUFBYU8sT0FBTztRQUNoQ0ksVUFBVTtRQUNWQyxRQUFRO1FBQ1JDLFVBQVU7UUFDVkMsTUFBTTtRQUNOQyxRQUFRLEtBQUssS0FBSyxLQUFLO0lBQ3pCO0FBQ0Y7QUFFTyxTQUFTQztJQUNkcEIscURBQU9BLEdBQUdjLEdBQUcsQ0FBQ1YsYUFBYSxJQUFJO1FBQUVXLFVBQVU7UUFBTU0sU0FBUyxJQUFJQyxLQUFLO1FBQUlKLE1BQU07SUFBSTtBQUNuRjtBQUVPLFNBQVNLO0lBQ2QsTUFBTVosUUFBUVgscURBQU9BLEdBQUd3QixHQUFHLENBQUNwQixjQUFjcUI7SUFDMUMsSUFBSSxDQUFDZCxPQUFPLE9BQU87SUFDbkIsT0FBT0QsVUFBYUM7QUFDdEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb2N1c2Zsb3cvLi9saWIvYXV0aC50cz9iZjdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJ1xuaW1wb3J0IHsgY29va2llcyB9IGZyb20gJ25leHQvaGVhZGVycydcblxuY29uc3QgSldUX1NFQ1JFVCA9IHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgYXMgc3RyaW5nIHwgdW5kZWZpbmVkXG5jb25zdCBDT09LSUVfTkFNRSA9ICdmb2N1c2Zsb3dfdG9rZW4nXG5cbmV4cG9ydCBmdW5jdGlvbiBzaWduSnd0KHBheWxvYWQ6IG9iamVjdCwgZXhwaXJlc0luOiBzdHJpbmcgPSAnN2QnKSB7XG4gIGlmICghSldUX1NFQ1JFVCkgdGhyb3cgbmV3IEVycm9yKCdKV1RfU0VDUkVUIGlzIG5vdCBzZXQuIEFkZCBpdCB0byAuZW52LmxvY2FsIGFuZCByZXN0YXJ0IHRoZSBkZXYgc2VydmVyLicpXG4gIHJldHVybiBqd3Quc2lnbihwYXlsb2FkLCBKV1RfU0VDUkVULCB7IGV4cGlyZXNJbiB9IGFzIGFueSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmeUp3dDxUID0gYW55Pih0b2tlbjogc3RyaW5nKTogVCB8IG51bGwge1xuICB0cnkge1xuICAgIGlmICghSldUX1NFQ1JFVCkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCkgYXMgVFxuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbFxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRBdXRoQ29va2llKHRva2VuOiBzdHJpbmcpIHtcbiAgY29va2llcygpLnNldChDT09LSUVfTkFNRSwgdG9rZW4sIHtcbiAgICBodHRwT25seTogdHJ1ZSxcbiAgICBzZWN1cmU6IHRydWUsXG4gICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgIHBhdGg6ICcvJyxcbiAgICBtYXhBZ2U6IDYwICogNjAgKiAyNCAqIDcsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckF1dGhDb29raWUoKSB7XG4gIGNvb2tpZXMoKS5zZXQoQ09PS0lFX05BTUUsICcnLCB7IGh0dHBPbmx5OiB0cnVlLCBleHBpcmVzOiBuZXcgRGF0ZSgwKSwgcGF0aDogJy8nIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRVc2VyRnJvbUNvb2tpZTxUID0gYW55PigpOiBUIHwgbnVsbCB7XG4gIGNvbnN0IHRva2VuID0gY29va2llcygpLmdldChDT09LSUVfTkFNRSk/LnZhbHVlXG4gIGlmICghdG9rZW4pIHJldHVybiBudWxsXG4gIHJldHVybiB2ZXJpZnlKd3Q8VD4odG9rZW4pXG59XG5cbiJdLCJuYW1lcyI6WyJqd3QiLCJjb29raWVzIiwiSldUX1NFQ1JFVCIsInByb2Nlc3MiLCJlbnYiLCJDT09LSUVfTkFNRSIsInNpZ25Kd3QiLCJwYXlsb2FkIiwiZXhwaXJlc0luIiwiRXJyb3IiLCJzaWduIiwidmVyaWZ5Snd0IiwidG9rZW4iLCJ2ZXJpZnkiLCJzZXRBdXRoQ29va2llIiwic2V0IiwiaHR0cE9ubHkiLCJzZWN1cmUiLCJzYW1lU2l0ZSIsInBhdGgiLCJtYXhBZ2UiLCJjbGVhckF1dGhDb29raWUiLCJleHBpcmVzIiwiRGF0ZSIsImdldFVzZXJGcm9tQ29va2llIiwiZ2V0IiwidmFsdWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectToDatabase: () => (/* binding */ connectToDatabase)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst MONGODB_URI = process.env.MONGODB_URI;\nlet cached = global.mongoose;\nif (!cached) {\n    cached = global.mongoose = {\n        conn: null,\n        promise: null\n    };\n}\nasync function connectToDatabase() {\n    // For development/testing purposes, if MONGODB_URI is not set or invalid,\n    // we'll use a mock connection\n    if (!MONGODB_URI) {\n        console.warn(\"⚠️ MONGODB_URI is not set. Using mock database connection.\");\n        return null;\n    }\n    try {\n        if (cached.conn) return cached.conn;\n        if (!cached.promise) {\n            cached.promise = mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, {\n                dbName: process.env.MONGODB_DB || \"focusflow\"\n            });\n        }\n        cached.conn = await cached.promise;\n        return cached.conn;\n    } catch (error) {\n        console.warn(\"⚠️ MongoDB connection failed. Using mock database connection.\");\n        console.error(\"MongoDB Error:\", error);\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBRWhDLE1BQU1DLGNBQWNDLFFBQVFDLEdBQUcsQ0FBQ0YsV0FBVztBQUUzQyxJQUFJRyxTQUFTLE9BQWdCSixRQUFRO0FBS3JDLElBQUksQ0FBQ0ksUUFBUTtJQUNYQSxTQUFTLE9BQWdCSixRQUFRLEdBQUc7UUFBRU0sTUFBTTtRQUFNQyxTQUFTO0lBQUs7QUFDbEU7QUFFTyxlQUFlQztJQUNwQiwwRUFBMEU7SUFDMUUsOEJBQThCO0lBQzlCLElBQUksQ0FBQ1AsYUFBYTtRQUNoQlEsUUFBUUMsSUFBSSxDQUFDO1FBQ2IsT0FBTztJQUNUO0lBRUEsSUFBSTtRQUNGLElBQUlOLE9BQU9FLElBQUksRUFBRSxPQUFPRixPQUFPRSxJQUFJO1FBQ25DLElBQUksQ0FBQ0YsT0FBT0csT0FBTyxFQUFFO1lBQ25CSCxPQUFPRyxPQUFPLEdBQUdQLHVEQUFnQixDQUFDQyxhQUFhO2dCQUM3Q1csUUFBUVYsUUFBUUMsR0FBRyxDQUFDVSxVQUFVLElBQUk7WUFDcEM7UUFDRjtRQUNBVCxPQUFPRSxJQUFJLEdBQUcsTUFBTUYsT0FBT0csT0FBTztRQUNsQyxPQUFPSCxPQUFPRSxJQUFJO0lBQ3BCLEVBQUUsT0FBT1EsT0FBTztRQUNkTCxRQUFRQyxJQUFJLENBQ1Y7UUFFRkQsUUFBUUssS0FBSyxDQUFDLGtCQUFrQkE7UUFDaEMsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb2N1c2Zsb3cvLi9saWIvZGIudHM/MWRmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XHJcblxyXG5jb25zdCBNT05HT0RCX1VSSSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIGFzIHN0cmluZyB8IHVuZGVmaW5lZDtcclxuXHJcbmxldCBjYWNoZWQgPSAoZ2xvYmFsIGFzIGFueSkubW9uZ29vc2UgYXMge1xyXG4gIGNvbm46IHR5cGVvZiBtb25nb29zZSB8IG51bGw7XHJcbiAgcHJvbWlzZTogUHJvbWlzZTx0eXBlb2YgbW9uZ29vc2U+IHwgbnVsbDtcclxufTtcclxuXHJcbmlmICghY2FjaGVkKSB7XHJcbiAgY2FjaGVkID0gKGdsb2JhbCBhcyBhbnkpLm1vbmdvb3NlID0geyBjb25uOiBudWxsLCBwcm9taXNlOiBudWxsIH07XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb25uZWN0VG9EYXRhYmFzZSgpIHtcclxuICAvLyBGb3IgZGV2ZWxvcG1lbnQvdGVzdGluZyBwdXJwb3NlcywgaWYgTU9OR09EQl9VUkkgaXMgbm90IHNldCBvciBpbnZhbGlkLFxyXG4gIC8vIHdlJ2xsIHVzZSBhIG1vY2sgY29ubmVjdGlvblxyXG4gIGlmICghTU9OR09EQl9VUkkpIHtcclxuICAgIGNvbnNvbGUud2FybihcIuKaoO+4jyBNT05HT0RCX1VSSSBpcyBub3Qgc2V0LiBVc2luZyBtb2NrIGRhdGFiYXNlIGNvbm5lY3Rpb24uXCIpO1xyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgaWYgKGNhY2hlZC5jb25uKSByZXR1cm4gY2FjaGVkLmNvbm47XHJcbiAgICBpZiAoIWNhY2hlZC5wcm9taXNlKSB7XHJcbiAgICAgIGNhY2hlZC5wcm9taXNlID0gbW9uZ29vc2UuY29ubmVjdChNT05HT0RCX1VSSSwge1xyXG4gICAgICAgIGRiTmFtZTogcHJvY2Vzcy5lbnYuTU9OR09EQl9EQiB8fCBcImZvY3VzZmxvd1wiLFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGNhY2hlZC5jb25uID0gYXdhaXQgY2FjaGVkLnByb21pc2U7XHJcbiAgICByZXR1cm4gY2FjaGVkLmNvbm47XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUud2FybihcclxuICAgICAgXCLimqDvuI8gTW9uZ29EQiBjb25uZWN0aW9uIGZhaWxlZC4gVXNpbmcgbW9jayBkYXRhYmFzZSBjb25uZWN0aW9uLlwiXHJcbiAgICApO1xyXG4gICAgY29uc29sZS5lcnJvcihcIk1vbmdvREIgRXJyb3I6XCIsIGVycm9yKTtcclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJNT05HT0RCX1VSSSIsInByb2Nlc3MiLCJlbnYiLCJjYWNoZWQiLCJnbG9iYWwiLCJjb25uIiwicHJvbWlzZSIsImNvbm5lY3RUb0RhdGFiYXNlIiwiY29uc29sZSIsIndhcm4iLCJjb25uZWN0IiwiZGJOYW1lIiwiTU9OR09EQl9EQiIsImVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./lib/gamification/achievements.ts":
/*!******************************************!*\
  !*** ./lib/gamification/achievements.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AchievementSystem: () => (/* binding */ AchievementSystem),\n/* harmony export */   achievementSystem: () => (/* binding */ achievementSystem)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var _models_Achievement__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/models/Achievement */ \"(rsc)/./models/Achievement.ts\");\n/* harmony import */ var _models_UserProgress__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/models/UserProgress */ \"(rsc)/./models/UserProgress.ts\");\n\n\n\nclass AchievementSystem {\n    static getInstance() {\n        if (!AchievementSystem.instance) {\n            AchievementSystem.instance = new AchievementSystem();\n        }\n        return AchievementSystem.instance;\n    }\n    async checkAchievements(check) {\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.connectToDatabase)();\n        const newAchievements = [];\n        const userId = check.userId;\n        // Get user progress\n        let userProgress = await _models_UserProgress__WEBPACK_IMPORTED_MODULE_2__.UserProgress.findOne({\n            userId\n        });\n        if (!userProgress) {\n            userProgress = await _models_UserProgress__WEBPACK_IMPORTED_MODULE_2__.UserProgress.create({\n                userId\n            });\n        }\n        // Check for various achievements\n        const achievements = await Promise.all([\n            this.checkFocusStreak(userId, check, userProgress),\n            this.checkLearningStreak(userId, check, userProgress),\n            this.checkHighScore(userId, check, userProgress),\n            this.checkCompletion(userId, check, userProgress),\n            this.checkEngagement(userId, check, userProgress),\n            this.checkImprovement(userId, check, userProgress)\n        ]);\n        // Filter out null achievements and add to array\n        achievements.forEach((achievement)=>{\n            if (achievement) {\n                newAchievements.push(achievement);\n            }\n        });\n        return newAchievements;\n    }\n    async checkFocusStreak(userId, check, userProgress) {\n        if (check.dataType !== \"attention\" || check.value < 0.7) return null;\n        // Check if user already has this achievement\n        const existingAchievement = await _models_Achievement__WEBPACK_IMPORTED_MODULE_1__.Achievement.findOne({\n            userId,\n            achievementType: \"focus_streak\",\n            \"metadata.streakCount\": userProgress.focusStreak + 1\n        });\n        if (existingAchievement) return null;\n        userProgress.focusStreak += 1;\n        await userProgress.save();\n        const streakCount = userProgress.focusStreak;\n        let achievement = null;\n        if (streakCount === 3) {\n            achievement = await _models_Achievement__WEBPACK_IMPORTED_MODULE_1__.Achievement.create({\n                userId,\n                achievementType: \"focus_streak\",\n                title: \"\\uD83C\\uDFAF Focus Starter\",\n                description: \"3 days of high focus! You're building great habits!\",\n                icon: \"\\uD83C\\uDFAF\",\n                points: 50,\n                metadata: {\n                    streakCount\n                }\n            });\n        } else if (streakCount === 7) {\n            achievement = await _models_Achievement__WEBPACK_IMPORTED_MODULE_1__.Achievement.create({\n                userId,\n                achievementType: \"focus_streak\",\n                title: \"\\uD83D\\uDD25 Focus Master\",\n                description: \"7 days of high focus! You're on fire!\",\n                icon: \"\\uD83D\\uDD25\",\n                points: 100,\n                metadata: {\n                    streakCount\n                }\n            });\n        } else if (streakCount === 30) {\n            achievement = await _models_Achievement__WEBPACK_IMPORTED_MODULE_1__.Achievement.create({\n                userId,\n                achievementType: \"focus_streak\",\n                title: \"\\uD83D\\uDC51 Focus Legend\",\n                description: \"30 days of high focus! You're a legend!\",\n                icon: \"\\uD83D\\uDC51\",\n                points: 500,\n                metadata: {\n                    streakCount\n                }\n            });\n        }\n        if (achievement) {\n            userProgress.totalPoints += achievement.points;\n            userProgress.achievements.push(achievement._id);\n            await userProgress.save();\n        }\n        return achievement;\n    }\n    async checkLearningStreak(userId, check, userProgress) {\n        if (check.dataType !== \"activity\") return null;\n        // Check if user already has this achievement\n        const existingAchievement = await _models_Achievement__WEBPACK_IMPORTED_MODULE_1__.Achievement.findOne({\n            userId,\n            achievementType: \"learning_streak\",\n            \"metadata.streakCount\": userProgress.learningStreak + 1\n        });\n        if (existingAchievement) return null;\n        userProgress.learningStreak += 1;\n        await userProgress.save();\n        const streakCount = userProgress.learningStreak;\n        let achievement = null;\n        if (streakCount === 5) {\n            achievement = await _models_Achievement__WEBPACK_IMPORTED_MODULE_1__.Achievement.create({\n                userId,\n                achievementType: \"learning_streak\",\n                title: \"\\uD83D\\uDCDA Learning Enthusiast\",\n                description: \"5 days of learning! You're building momentum!\",\n                icon: \"\\uD83D\\uDCDA\",\n                points: 75,\n                metadata: {\n                    streakCount\n                }\n            });\n        } else if (streakCount === 14) {\n            achievement = await _models_Achievement__WEBPACK_IMPORTED_MODULE_1__.Achievement.create({\n                userId,\n                achievementType: \"learning_streak\",\n                title: \"\\uD83C\\uDF1F Learning Champion\",\n                description: \"2 weeks of learning! You're unstoppable!\",\n                icon: \"\\uD83C\\uDF1F\",\n                points: 200,\n                metadata: {\n                    streakCount\n                }\n            });\n        } else if (streakCount === 30) {\n            achievement = await _models_Achievement__WEBPACK_IMPORTED_MODULE_1__.Achievement.create({\n                userId,\n                achievementType: \"learning_streak\",\n                title: \"\\uD83C\\uDFC6 Learning Legend\",\n                description: \"30 days of learning! You're a true champion!\",\n                icon: \"\\uD83C\\uDFC6\",\n                points: 1000,\n                metadata: {\n                    streakCount\n                }\n            });\n        }\n        if (achievement) {\n            userProgress.totalPoints += achievement.points;\n            userProgress.achievements.push(achievement._id);\n            await userProgress.save();\n        }\n        return achievement;\n    }\n    async checkHighScore(userId, check, userProgress) {\n        if (check.value < 0.9) return null;\n        const dataType = check.dataType;\n        const currentHigh = userProgress.highScores[dataType] || 0;\n        if (check.value <= currentHigh) return null;\n        userProgress.highScores[dataType] = check.value;\n        await userProgress.save();\n        const achievement = await _models_Achievement__WEBPACK_IMPORTED_MODULE_1__.Achievement.create({\n            userId,\n            achievementType: \"high_score\",\n            title: `⭐ ${dataType.charAt(0).toUpperCase() + dataType.slice(1)} Master`,\n            description: `New personal best in ${dataType}! You scored ${Math.round(check.value * 100)}%!`,\n            icon: \"⭐\",\n            points: 100,\n            metadata: {\n                score: check.value,\n                category: dataType\n            }\n        });\n        userProgress.totalPoints += achievement.points;\n        userProgress.achievements.push(achievement._id);\n        await userProgress.save();\n        return achievement;\n    }\n    async checkCompletion(userId, check, userProgress) {\n        if (check.dataType !== \"activity\" || !check.metadata?.contentId) return null;\n        userProgress.completedActivities += 1;\n        await userProgress.save();\n        const completedCount = userProgress.completedActivities;\n        let achievement = null;\n        if (completedCount === 10) {\n            achievement = await _models_Achievement__WEBPACK_IMPORTED_MODULE_1__.Achievement.create({\n                userId,\n                achievementType: \"completion\",\n                title: \"\\uD83C\\uDFAE Activity Explorer\",\n                description: \"Completed 10 activities! You're exploring and learning!\",\n                icon: \"\\uD83C\\uDFAE\",\n                points: 100,\n                metadata: {\n                    contentId: check.metadata.contentId\n                }\n            });\n        } else if (completedCount === 50) {\n            achievement = await _models_Achievement__WEBPACK_IMPORTED_MODULE_1__.Achievement.create({\n                userId,\n                achievementType: \"completion\",\n                title: \"\\uD83D\\uDE80 Activity Master\",\n                description: \"Completed 50 activities! You're a learning machine!\",\n                icon: \"\\uD83D\\uDE80\",\n                points: 300,\n                metadata: {\n                    contentId: check.metadata.contentId\n                }\n            });\n        } else if (completedCount === 100) {\n            achievement = await _models_Achievement__WEBPACK_IMPORTED_MODULE_1__.Achievement.create({\n                userId,\n                achievementType: \"completion\",\n                title: \"\\uD83C\\uDFC5 Activity Legend\",\n                description: \"Completed 100 activities! You're a true legend!\",\n                icon: \"\\uD83C\\uDFC5\",\n                points: 1000,\n                metadata: {\n                    contentId: check.metadata.contentId\n                }\n            });\n        }\n        if (achievement) {\n            userProgress.totalPoints += achievement.points;\n            userProgress.achievements.push(achievement._id);\n            await userProgress.save();\n        }\n        return achievement;\n    }\n    async checkEngagement(userId, check, userProgress) {\n        if (check.dataType !== \"engagement\" || check.value < 0.8) return null;\n        const achievement = await _models_Achievement__WEBPACK_IMPORTED_MODULE_1__.Achievement.create({\n            userId,\n            achievementType: \"engagement\",\n            title: \"\\uD83D\\uDD25 Engagement Fire\",\n            description: \"Super high engagement! You're totally into this!\",\n            icon: \"\\uD83D\\uDD25\",\n            points: 50,\n            metadata: {\n                score: check.value\n            }\n        });\n        userProgress.totalPoints += achievement.points;\n        userProgress.achievements.push(achievement._id);\n        await userProgress.save();\n        return achievement;\n    }\n    async checkImprovement(userId, check, userProgress) {\n        // This would check for improvement over time\n        // For now, we'll create a simple improvement check\n        if (check.value > 0.8) {\n            const achievement = await _models_Achievement__WEBPACK_IMPORTED_MODULE_1__.Achievement.create({\n                userId,\n                achievementType: \"improvement\",\n                title: \"\\uD83D\\uDCC8 Improvement Star\",\n                description: \"Great improvement! You're getting better every day!\",\n                icon: \"\\uD83D\\uDCC8\",\n                points: 75,\n                metadata: {\n                    score: check.value\n                }\n            });\n            userProgress.totalPoints += achievement.points;\n            userProgress.achievements.push(achievement._id);\n            await userProgress.save();\n            return achievement;\n        }\n        return null;\n    }\n    async getUserProgress(userId) {\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.connectToDatabase)();\n        let userProgress = await _models_UserProgress__WEBPACK_IMPORTED_MODULE_2__.UserProgress.findOne({\n            userId\n        });\n        if (!userProgress) {\n            userProgress = await _models_UserProgress__WEBPACK_IMPORTED_MODULE_2__.UserProgress.create({\n                userId\n            });\n        }\n        const achievements = await _models_Achievement__WEBPACK_IMPORTED_MODULE_1__.Achievement.find({\n            userId\n        }).sort({\n            unlockedAt: -1\n        }).limit(10);\n        return {\n            ...userProgress.toObject(),\n            recentAchievements: achievements\n        };\n    }\n    async getLeaderboard(limit = 10) {\n        await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.connectToDatabase)();\n        return await _models_UserProgress__WEBPACK_IMPORTED_MODULE_2__.UserProgress.find().populate(\"userId\", \"name\").sort({\n            totalPoints: -1\n        }).limit(limit);\n    }\n}\nconst achievementSystem = AchievementSystem.getInstance();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVksQ0FBQ1csSUFBSSxDQUFDRCxZQUFZZSxHQUFHO1lBQzlDLE1BQU01QixhQUFhb0IsSUFBSTtZQUV2QixPQUFPUDtRQUNUO1FBRUEsT0FBTztJQUNUO0lBRUEsTUFBTTZCLGdCQUFnQjNDLE1BQWMsRUFBZ0I7UUFDbEQsTUFBTVQsMERBQWlCQTtRQUV2QixJQUFJVSxlQUFlLE1BQU1SLDhEQUFZQSxDQUFDUyxPQUFPLENBQUM7WUFBRUY7UUFBTztRQUN2RCxJQUFJLENBQUNDLGNBQWM7WUFDakJBLGVBQWUsTUFBTVIsOERBQVlBLENBQUNVLE1BQU0sQ0FBQztnQkFBRUg7WUFBTztRQUNwRDtRQUVBLE1BQU1JLGVBQWUsTUFBTVosNERBQVdBLENBQUNvRCxJQUFJLENBQUM7WUFBRTVDO1FBQU8sR0FDbEQ2QyxJQUFJLENBQUM7WUFBRUMsWUFBWSxDQUFDO1FBQUUsR0FDdEJDLEtBQUssQ0FBQztRQUVULE9BQU87WUFDTCxHQUFHOUMsYUFBYStDLFFBQVEsRUFBRTtZQUMxQkMsb0JBQW9CN0M7UUFDdEI7SUFDRjtJQUVBLE1BQU04QyxlQUFlSCxRQUFnQixFQUFFLEVBQWtCO1FBQ3ZELE1BQU14RCwwREFBaUJBO1FBRXZCLE9BQU8sTUFBTUUsOERBQVlBLENBQUNtRCxJQUFJLEdBQzNCTyxRQUFRLENBQUMsVUFBVSxRQUNuQk4sSUFBSSxDQUFDO1lBQUVqQixhQUFhLENBQUM7UUFBRSxHQUN2Qm1CLEtBQUssQ0FBQ0E7SUFDWDtBQUNGO0FBRU8sTUFBTUssb0JBQW9CMUQsa0JBQWtCQyxXQUFXLEdBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9mb2N1c2Zsb3cvLi9saWIvZ2FtaWZpY2F0aW9uL2FjaGlldmVtZW50cy50cz9kMjU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNvbm5lY3RUb0RhdGFiYXNlIH0gZnJvbSBcIkAvbGliL2RiXCI7XHJcbmltcG9ydCB7IEFjaGlldmVtZW50IH0gZnJvbSBcIkAvbW9kZWxzL0FjaGlldmVtZW50XCI7XHJcbmltcG9ydCB7IFVzZXJQcm9ncmVzcyB9IGZyb20gXCJAL21vZGVscy9Vc2VyUHJvZ3Jlc3NcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgQWNoaWV2ZW1lbnRDaGVjayB7XHJcbiAgdXNlcklkOiBzdHJpbmc7XHJcbiAgZGF0YVR5cGU6IFwiYXR0ZW50aW9uXCIgfCBcImVuZ2FnZW1lbnRcIiB8IFwicGVyZm9ybWFuY2VcIiB8IFwiYWN0aXZpdHlcIjtcclxuICB2YWx1ZTogbnVtYmVyO1xyXG4gIG1ldGFkYXRhPzogYW55O1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQWNoaWV2ZW1lbnRTeXN0ZW0ge1xyXG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBBY2hpZXZlbWVudFN5c3RlbTtcclxuXHJcbiAgc3RhdGljIGdldEluc3RhbmNlKCk6IEFjaGlldmVtZW50U3lzdGVtIHtcclxuICAgIGlmICghQWNoaWV2ZW1lbnRTeXN0ZW0uaW5zdGFuY2UpIHtcclxuICAgICAgQWNoaWV2ZW1lbnRTeXN0ZW0uaW5zdGFuY2UgPSBuZXcgQWNoaWV2ZW1lbnRTeXN0ZW0oKTtcclxuICAgIH1cclxuICAgIHJldHVybiBBY2hpZXZlbWVudFN5c3RlbS5pbnN0YW5jZTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGNoZWNrQWNoaWV2ZW1lbnRzKGNoZWNrOiBBY2hpZXZlbWVudENoZWNrKTogUHJvbWlzZTxhbnlbXT4ge1xyXG4gICAgYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKTtcclxuXHJcbiAgICBjb25zdCBuZXdBY2hpZXZlbWVudHM6IGFueVtdID0gW107XHJcbiAgICBjb25zdCB1c2VySWQgPSBjaGVjay51c2VySWQ7XHJcblxyXG4gICAgLy8gR2V0IHVzZXIgcHJvZ3Jlc3NcclxuICAgIGxldCB1c2VyUHJvZ3Jlc3MgPSBhd2FpdCBVc2VyUHJvZ3Jlc3MuZmluZE9uZSh7IHVzZXJJZCB9KTtcclxuICAgIGlmICghdXNlclByb2dyZXNzKSB7XHJcbiAgICAgIHVzZXJQcm9ncmVzcyA9IGF3YWl0IFVzZXJQcm9ncmVzcy5jcmVhdGUoeyB1c2VySWQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQ2hlY2sgZm9yIHZhcmlvdXMgYWNoaWV2ZW1lbnRzXHJcbiAgICBjb25zdCBhY2hpZXZlbWVudHMgPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgIHRoaXMuY2hlY2tGb2N1c1N0cmVhayh1c2VySWQsIGNoZWNrLCB1c2VyUHJvZ3Jlc3MpLFxyXG4gICAgICB0aGlzLmNoZWNrTGVhcm5pbmdTdHJlYWsodXNlcklkLCBjaGVjaywgdXNlclByb2dyZXNzKSxcclxuICAgICAgdGhpcy5jaGVja0hpZ2hTY29yZSh1c2VySWQsIGNoZWNrLCB1c2VyUHJvZ3Jlc3MpLFxyXG4gICAgICB0aGlzLmNoZWNrQ29tcGxldGlvbih1c2VySWQsIGNoZWNrLCB1c2VyUHJvZ3Jlc3MpLFxyXG4gICAgICB0aGlzLmNoZWNrRW5nYWdlbWVudCh1c2VySWQsIGNoZWNrLCB1c2VyUHJvZ3Jlc3MpLFxyXG4gICAgICB0aGlzLmNoZWNrSW1wcm92ZW1lbnQodXNlcklkLCBjaGVjaywgdXNlclByb2dyZXNzKSxcclxuICAgIF0pO1xyXG5cclxuICAgIC8vIEZpbHRlciBvdXQgbnVsbCBhY2hpZXZlbWVudHMgYW5kIGFkZCB0byBhcnJheVxyXG4gICAgYWNoaWV2ZW1lbnRzLmZvckVhY2goKGFjaGlldmVtZW50KSA9PiB7XHJcbiAgICAgIGlmIChhY2hpZXZlbWVudCkge1xyXG4gICAgICAgIG5ld0FjaGlldmVtZW50cy5wdXNoKGFjaGlldmVtZW50KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIG5ld0FjaGlldmVtZW50cztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tGb2N1c1N0cmVhayhcclxuICAgIHVzZXJJZDogc3RyaW5nLFxyXG4gICAgY2hlY2s6IEFjaGlldmVtZW50Q2hlY2ssXHJcbiAgICB1c2VyUHJvZ3Jlc3M6IGFueVxyXG4gICk6IFByb21pc2U8YW55PiB7XHJcbiAgICBpZiAoY2hlY2suZGF0YVR5cGUgIT09IFwiYXR0ZW50aW9uXCIgfHwgY2hlY2sudmFsdWUgPCAwLjcpIHJldHVybiBudWxsO1xyXG5cclxuICAgIC8vIENoZWNrIGlmIHVzZXIgYWxyZWFkeSBoYXMgdGhpcyBhY2hpZXZlbWVudFxyXG4gICAgY29uc3QgZXhpc3RpbmdBY2hpZXZlbWVudCA9IGF3YWl0IEFjaGlldmVtZW50LmZpbmRPbmUoe1xyXG4gICAgICB1c2VySWQsXHJcbiAgICAgIGFjaGlldmVtZW50VHlwZTogXCJmb2N1c19zdHJlYWtcIixcclxuICAgICAgXCJtZXRhZGF0YS5zdHJlYWtDb3VudFwiOiB1c2VyUHJvZ3Jlc3MuZm9jdXNTdHJlYWsgKyAxLFxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGV4aXN0aW5nQWNoaWV2ZW1lbnQpIHJldHVybiBudWxsO1xyXG5cclxuICAgIHVzZXJQcm9ncmVzcy5mb2N1c1N0cmVhayArPSAxO1xyXG4gICAgYXdhaXQgdXNlclByb2dyZXNzLnNhdmUoKTtcclxuXHJcbiAgICBjb25zdCBzdHJlYWtDb3VudCA9IHVzZXJQcm9ncmVzcy5mb2N1c1N0cmVhaztcclxuICAgIGxldCBhY2hpZXZlbWVudCA9IG51bGw7XHJcblxyXG4gICAgaWYgKHN0cmVha0NvdW50ID09PSAzKSB7XHJcbiAgICAgIGFjaGlldmVtZW50ID0gYXdhaXQgQWNoaWV2ZW1lbnQuY3JlYXRlKHtcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgYWNoaWV2ZW1lbnRUeXBlOiBcImZvY3VzX3N0cmVha1wiLFxyXG4gICAgICAgIHRpdGxlOiBcIvCfjq8gRm9jdXMgU3RhcnRlclwiLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIjMgZGF5cyBvZiBoaWdoIGZvY3VzISBZb3UncmUgYnVpbGRpbmcgZ3JlYXQgaGFiaXRzIVwiLFxyXG4gICAgICAgIGljb246IFwi8J+Or1wiLFxyXG4gICAgICAgIHBvaW50czogNTAsXHJcbiAgICAgICAgbWV0YWRhdGE6IHsgc3RyZWFrQ291bnQgfSxcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2UgaWYgKHN0cmVha0NvdW50ID09PSA3KSB7XHJcbiAgICAgIGFjaGlldmVtZW50ID0gYXdhaXQgQWNoaWV2ZW1lbnQuY3JlYXRlKHtcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgYWNoaWV2ZW1lbnRUeXBlOiBcImZvY3VzX3N0cmVha1wiLFxyXG4gICAgICAgIHRpdGxlOiBcIvCflKUgRm9jdXMgTWFzdGVyXCIsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IFwiNyBkYXlzIG9mIGhpZ2ggZm9jdXMhIFlvdSdyZSBvbiBmaXJlIVwiLFxyXG4gICAgICAgIGljb246IFwi8J+UpVwiLFxyXG4gICAgICAgIHBvaW50czogMTAwLFxyXG4gICAgICAgIG1ldGFkYXRhOiB7IHN0cmVha0NvdW50IH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmIChzdHJlYWtDb3VudCA9PT0gMzApIHtcclxuICAgICAgYWNoaWV2ZW1lbnQgPSBhd2FpdCBBY2hpZXZlbWVudC5jcmVhdGUoe1xyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICBhY2hpZXZlbWVudFR5cGU6IFwiZm9jdXNfc3RyZWFrXCIsXHJcbiAgICAgICAgdGl0bGU6IFwi8J+RkSBGb2N1cyBMZWdlbmRcIixcclxuICAgICAgICBkZXNjcmlwdGlvbjogXCIzMCBkYXlzIG9mIGhpZ2ggZm9jdXMhIFlvdSdyZSBhIGxlZ2VuZCFcIixcclxuICAgICAgICBpY29uOiBcIvCfkZFcIixcclxuICAgICAgICBwb2ludHM6IDUwMCxcclxuICAgICAgICBtZXRhZGF0YTogeyBzdHJlYWtDb3VudCB9LFxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYWNoaWV2ZW1lbnQpIHtcclxuICAgICAgdXNlclByb2dyZXNzLnRvdGFsUG9pbnRzICs9IGFjaGlldmVtZW50LnBvaW50cztcclxuICAgICAgdXNlclByb2dyZXNzLmFjaGlldmVtZW50cy5wdXNoKGFjaGlldmVtZW50Ll9pZCk7XHJcbiAgICAgIGF3YWl0IHVzZXJQcm9ncmVzcy5zYXZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGFjaGlldmVtZW50O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBjaGVja0xlYXJuaW5nU3RyZWFrKFxyXG4gICAgdXNlcklkOiBzdHJpbmcsXHJcbiAgICBjaGVjazogQWNoaWV2ZW1lbnRDaGVjayxcclxuICAgIHVzZXJQcm9ncmVzczogYW55XHJcbiAgKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGlmIChjaGVjay5kYXRhVHlwZSAhPT0gXCJhY3Rpdml0eVwiKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAvLyBDaGVjayBpZiB1c2VyIGFscmVhZHkgaGFzIHRoaXMgYWNoaWV2ZW1lbnRcclxuICAgIGNvbnN0IGV4aXN0aW5nQWNoaWV2ZW1lbnQgPSBhd2FpdCBBY2hpZXZlbWVudC5maW5kT25lKHtcclxuICAgICAgdXNlcklkLFxyXG4gICAgICBhY2hpZXZlbWVudFR5cGU6IFwibGVhcm5pbmdfc3RyZWFrXCIsXHJcbiAgICAgIFwibWV0YWRhdGEuc3RyZWFrQ291bnRcIjogdXNlclByb2dyZXNzLmxlYXJuaW5nU3RyZWFrICsgMSxcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChleGlzdGluZ0FjaGlldmVtZW50KSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICB1c2VyUHJvZ3Jlc3MubGVhcm5pbmdTdHJlYWsgKz0gMTtcclxuICAgIGF3YWl0IHVzZXJQcm9ncmVzcy5zYXZlKCk7XHJcblxyXG4gICAgY29uc3Qgc3RyZWFrQ291bnQgPSB1c2VyUHJvZ3Jlc3MubGVhcm5pbmdTdHJlYWs7XHJcbiAgICBsZXQgYWNoaWV2ZW1lbnQgPSBudWxsO1xyXG5cclxuICAgIGlmIChzdHJlYWtDb3VudCA9PT0gNSkge1xyXG4gICAgICBhY2hpZXZlbWVudCA9IGF3YWl0IEFjaGlldmVtZW50LmNyZWF0ZSh7XHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIGFjaGlldmVtZW50VHlwZTogXCJsZWFybmluZ19zdHJlYWtcIixcclxuICAgICAgICB0aXRsZTogXCLwn5OaIExlYXJuaW5nIEVudGh1c2lhc3RcIixcclxuICAgICAgICBkZXNjcmlwdGlvbjogXCI1IGRheXMgb2YgbGVhcm5pbmchIFlvdSdyZSBidWlsZGluZyBtb21lbnR1bSFcIixcclxuICAgICAgICBpY29uOiBcIvCfk5pcIixcclxuICAgICAgICBwb2ludHM6IDc1LFxyXG4gICAgICAgIG1ldGFkYXRhOiB7IHN0cmVha0NvdW50IH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmIChzdHJlYWtDb3VudCA9PT0gMTQpIHtcclxuICAgICAgYWNoaWV2ZW1lbnQgPSBhd2FpdCBBY2hpZXZlbWVudC5jcmVhdGUoe1xyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICBhY2hpZXZlbWVudFR5cGU6IFwibGVhcm5pbmdfc3RyZWFrXCIsXHJcbiAgICAgICAgdGl0bGU6IFwi8J+MnyBMZWFybmluZyBDaGFtcGlvblwiLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIjIgd2Vla3Mgb2YgbGVhcm5pbmchIFlvdSdyZSB1bnN0b3BwYWJsZSFcIixcclxuICAgICAgICBpY29uOiBcIvCfjJ9cIixcclxuICAgICAgICBwb2ludHM6IDIwMCxcclxuICAgICAgICBtZXRhZGF0YTogeyBzdHJlYWtDb3VudCB9LFxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSBpZiAoc3RyZWFrQ291bnQgPT09IDMwKSB7XHJcbiAgICAgIGFjaGlldmVtZW50ID0gYXdhaXQgQWNoaWV2ZW1lbnQuY3JlYXRlKHtcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgYWNoaWV2ZW1lbnRUeXBlOiBcImxlYXJuaW5nX3N0cmVha1wiLFxyXG4gICAgICAgIHRpdGxlOiBcIvCfj4YgTGVhcm5pbmcgTGVnZW5kXCIsXHJcbiAgICAgICAgZGVzY3JpcHRpb246IFwiMzAgZGF5cyBvZiBsZWFybmluZyEgWW91J3JlIGEgdHJ1ZSBjaGFtcGlvbiFcIixcclxuICAgICAgICBpY29uOiBcIvCfj4ZcIixcclxuICAgICAgICBwb2ludHM6IDEwMDAsXHJcbiAgICAgICAgbWV0YWRhdGE6IHsgc3RyZWFrQ291bnQgfSxcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGFjaGlldmVtZW50KSB7XHJcbiAgICAgIHVzZXJQcm9ncmVzcy50b3RhbFBvaW50cyArPSBhY2hpZXZlbWVudC5wb2ludHM7XHJcbiAgICAgIHVzZXJQcm9ncmVzcy5hY2hpZXZlbWVudHMucHVzaChhY2hpZXZlbWVudC5faWQpO1xyXG4gICAgICBhd2FpdCB1c2VyUHJvZ3Jlc3Muc2F2ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBhY2hpZXZlbWVudDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgY2hlY2tIaWdoU2NvcmUoXHJcbiAgICB1c2VySWQ6IHN0cmluZyxcclxuICAgIGNoZWNrOiBBY2hpZXZlbWVudENoZWNrLFxyXG4gICAgdXNlclByb2dyZXNzOiBhbnlcclxuICApOiBQcm9taXNlPGFueT4ge1xyXG4gICAgaWYgKGNoZWNrLnZhbHVlIDwgMC45KSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICBjb25zdCBkYXRhVHlwZSA9IGNoZWNrLmRhdGFUeXBlO1xyXG4gICAgY29uc3QgY3VycmVudEhpZ2ggPSB1c2VyUHJvZ3Jlc3MuaGlnaFNjb3Jlc1tkYXRhVHlwZV0gfHwgMDtcclxuXHJcbiAgICBpZiAoY2hlY2sudmFsdWUgPD0gY3VycmVudEhpZ2gpIHJldHVybiBudWxsO1xyXG5cclxuICAgIHVzZXJQcm9ncmVzcy5oaWdoU2NvcmVzW2RhdGFUeXBlXSA9IGNoZWNrLnZhbHVlO1xyXG4gICAgYXdhaXQgdXNlclByb2dyZXNzLnNhdmUoKTtcclxuXHJcbiAgICBjb25zdCBhY2hpZXZlbWVudCA9IGF3YWl0IEFjaGlldmVtZW50LmNyZWF0ZSh7XHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgYWNoaWV2ZW1lbnRUeXBlOiBcImhpZ2hfc2NvcmVcIixcclxuICAgICAgdGl0bGU6IGDirZAgJHtcclxuICAgICAgICBkYXRhVHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGRhdGFUeXBlLnNsaWNlKDEpXHJcbiAgICAgIH0gTWFzdGVyYCxcclxuICAgICAgZGVzY3JpcHRpb246IGBOZXcgcGVyc29uYWwgYmVzdCBpbiAke2RhdGFUeXBlfSEgWW91IHNjb3JlZCAke01hdGgucm91bmQoXHJcbiAgICAgICAgY2hlY2sudmFsdWUgKiAxMDBcclxuICAgICAgKX0lIWAsXHJcbiAgICAgIGljb246IFwi4q2QXCIsXHJcbiAgICAgIHBvaW50czogMTAwLFxyXG4gICAgICBtZXRhZGF0YTogeyBzY29yZTogY2hlY2sudmFsdWUsIGNhdGVnb3J5OiBkYXRhVHlwZSB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgdXNlclByb2dyZXNzLnRvdGFsUG9pbnRzICs9IGFjaGlldmVtZW50LnBvaW50cztcclxuICAgIHVzZXJQcm9ncmVzcy5hY2hpZXZlbWVudHMucHVzaChhY2hpZXZlbWVudC5faWQpO1xyXG4gICAgYXdhaXQgdXNlclByb2dyZXNzLnNhdmUoKTtcclxuXHJcbiAgICByZXR1cm4gYWNoaWV2ZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGNoZWNrQ29tcGxldGlvbihcclxuICAgIHVzZXJJZDogc3RyaW5nLFxyXG4gICAgY2hlY2s6IEFjaGlldmVtZW50Q2hlY2ssXHJcbiAgICB1c2VyUHJvZ3Jlc3M6IGFueVxyXG4gICk6IFByb21pc2U8YW55PiB7XHJcbiAgICBpZiAoY2hlY2suZGF0YVR5cGUgIT09IFwiYWN0aXZpdHlcIiB8fCAhY2hlY2subWV0YWRhdGE/LmNvbnRlbnRJZClcclxuICAgICAgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgdXNlclByb2dyZXNzLmNvbXBsZXRlZEFjdGl2aXRpZXMgKz0gMTtcclxuICAgIGF3YWl0IHVzZXJQcm9ncmVzcy5zYXZlKCk7XHJcblxyXG4gICAgY29uc3QgY29tcGxldGVkQ291bnQgPSB1c2VyUHJvZ3Jlc3MuY29tcGxldGVkQWN0aXZpdGllcztcclxuICAgIGxldCBhY2hpZXZlbWVudCA9IG51bGw7XHJcblxyXG4gICAgaWYgKGNvbXBsZXRlZENvdW50ID09PSAxMCkge1xyXG4gICAgICBhY2hpZXZlbWVudCA9IGF3YWl0IEFjaGlldmVtZW50LmNyZWF0ZSh7XHJcbiAgICAgICAgdXNlcklkLFxyXG4gICAgICAgIGFjaGlldmVtZW50VHlwZTogXCJjb21wbGV0aW9uXCIsXHJcbiAgICAgICAgdGl0bGU6IFwi8J+OriBBY3Rpdml0eSBFeHBsb3JlclwiLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNvbXBsZXRlZCAxMCBhY3Rpdml0aWVzISBZb3UncmUgZXhwbG9yaW5nIGFuZCBsZWFybmluZyFcIixcclxuICAgICAgICBpY29uOiBcIvCfjq5cIixcclxuICAgICAgICBwb2ludHM6IDEwMCxcclxuICAgICAgICBtZXRhZGF0YTogeyBjb250ZW50SWQ6IGNoZWNrLm1ldGFkYXRhLmNvbnRlbnRJZCB9LFxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSBpZiAoY29tcGxldGVkQ291bnQgPT09IDUwKSB7XHJcbiAgICAgIGFjaGlldmVtZW50ID0gYXdhaXQgQWNoaWV2ZW1lbnQuY3JlYXRlKHtcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgYWNoaWV2ZW1lbnRUeXBlOiBcImNvbXBsZXRpb25cIixcclxuICAgICAgICB0aXRsZTogXCLwn5qAIEFjdGl2aXR5IE1hc3RlclwiLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNvbXBsZXRlZCA1MCBhY3Rpdml0aWVzISBZb3UncmUgYSBsZWFybmluZyBtYWNoaW5lIVwiLFxyXG4gICAgICAgIGljb246IFwi8J+agFwiLFxyXG4gICAgICAgIHBvaW50czogMzAwLFxyXG4gICAgICAgIG1ldGFkYXRhOiB7IGNvbnRlbnRJZDogY2hlY2subWV0YWRhdGEuY29udGVudElkIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmIChjb21wbGV0ZWRDb3VudCA9PT0gMTAwKSB7XHJcbiAgICAgIGFjaGlldmVtZW50ID0gYXdhaXQgQWNoaWV2ZW1lbnQuY3JlYXRlKHtcclxuICAgICAgICB1c2VySWQsXHJcbiAgICAgICAgYWNoaWV2ZW1lbnRUeXBlOiBcImNvbXBsZXRpb25cIixcclxuICAgICAgICB0aXRsZTogXCLwn4+FIEFjdGl2aXR5IExlZ2VuZFwiLFxyXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkNvbXBsZXRlZCAxMDAgYWN0aXZpdGllcyEgWW91J3JlIGEgdHJ1ZSBsZWdlbmQhXCIsXHJcbiAgICAgICAgaWNvbjogXCLwn4+FXCIsXHJcbiAgICAgICAgcG9pbnRzOiAxMDAwLFxyXG4gICAgICAgIG1ldGFkYXRhOiB7IGNvbnRlbnRJZDogY2hlY2subWV0YWRhdGEuY29udGVudElkIH0sXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChhY2hpZXZlbWVudCkge1xyXG4gICAgICB1c2VyUHJvZ3Jlc3MudG90YWxQb2ludHMgKz0gYWNoaWV2ZW1lbnQucG9pbnRzO1xyXG4gICAgICB1c2VyUHJvZ3Jlc3MuYWNoaWV2ZW1lbnRzLnB1c2goYWNoaWV2ZW1lbnQuX2lkKTtcclxuICAgICAgYXdhaXQgdXNlclByb2dyZXNzLnNhdmUoKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYWNoaWV2ZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGNoZWNrRW5nYWdlbWVudChcclxuICAgIHVzZXJJZDogc3RyaW5nLFxyXG4gICAgY2hlY2s6IEFjaGlldmVtZW50Q2hlY2ssXHJcbiAgICB1c2VyUHJvZ3Jlc3M6IGFueVxyXG4gICk6IFByb21pc2U8YW55PiB7XHJcbiAgICBpZiAoY2hlY2suZGF0YVR5cGUgIT09IFwiZW5nYWdlbWVudFwiIHx8IGNoZWNrLnZhbHVlIDwgMC44KSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICBjb25zdCBhY2hpZXZlbWVudCA9IGF3YWl0IEFjaGlldmVtZW50LmNyZWF0ZSh7XHJcbiAgICAgIHVzZXJJZCxcclxuICAgICAgYWNoaWV2ZW1lbnRUeXBlOiBcImVuZ2FnZW1lbnRcIixcclxuICAgICAgdGl0bGU6IFwi8J+UpSBFbmdhZ2VtZW50IEZpcmVcIixcclxuICAgICAgZGVzY3JpcHRpb246IFwiU3VwZXIgaGlnaCBlbmdhZ2VtZW50ISBZb3UncmUgdG90YWxseSBpbnRvIHRoaXMhXCIsXHJcbiAgICAgIGljb246IFwi8J+UpVwiLFxyXG4gICAgICBwb2ludHM6IDUwLFxyXG4gICAgICBtZXRhZGF0YTogeyBzY29yZTogY2hlY2sudmFsdWUgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIHVzZXJQcm9ncmVzcy50b3RhbFBvaW50cyArPSBhY2hpZXZlbWVudC5wb2ludHM7XHJcbiAgICB1c2VyUHJvZ3Jlc3MuYWNoaWV2ZW1lbnRzLnB1c2goYWNoaWV2ZW1lbnQuX2lkKTtcclxuICAgIGF3YWl0IHVzZXJQcm9ncmVzcy5zYXZlKCk7XHJcblxyXG4gICAgcmV0dXJuIGFjaGlldmVtZW50O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBjaGVja0ltcHJvdmVtZW50KFxyXG4gICAgdXNlcklkOiBzdHJpbmcsXHJcbiAgICBjaGVjazogQWNoaWV2ZW1lbnRDaGVjayxcclxuICAgIHVzZXJQcm9ncmVzczogYW55XHJcbiAgKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIC8vIFRoaXMgd291bGQgY2hlY2sgZm9yIGltcHJvdmVtZW50IG92ZXIgdGltZVxyXG4gICAgLy8gRm9yIG5vdywgd2UnbGwgY3JlYXRlIGEgc2ltcGxlIGltcHJvdmVtZW50IGNoZWNrXHJcbiAgICBpZiAoY2hlY2sudmFsdWUgPiAwLjgpIHtcclxuICAgICAgY29uc3QgYWNoaWV2ZW1lbnQgPSBhd2FpdCBBY2hpZXZlbWVudC5jcmVhdGUoe1xyXG4gICAgICAgIHVzZXJJZCxcclxuICAgICAgICBhY2hpZXZlbWVudFR5cGU6IFwiaW1wcm92ZW1lbnRcIixcclxuICAgICAgICB0aXRsZTogXCLwn5OIIEltcHJvdmVtZW50IFN0YXJcIixcclxuICAgICAgICBkZXNjcmlwdGlvbjogXCJHcmVhdCBpbXByb3ZlbWVudCEgWW91J3JlIGdldHRpbmcgYmV0dGVyIGV2ZXJ5IGRheSFcIixcclxuICAgICAgICBpY29uOiBcIvCfk4hcIixcclxuICAgICAgICBwb2ludHM6IDc1LFxyXG4gICAgICAgIG1ldGFkYXRhOiB7IHNjb3JlOiBjaGVjay52YWx1ZSB9LFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHVzZXJQcm9ncmVzcy50b3RhbFBvaW50cyArPSBhY2hpZXZlbWVudC5wb2ludHM7XHJcbiAgICAgIHVzZXJQcm9ncmVzcy5hY2hpZXZlbWVudHMucHVzaChhY2hpZXZlbWVudC5faWQpO1xyXG4gICAgICBhd2FpdCB1c2VyUHJvZ3Jlc3Muc2F2ZSgpO1xyXG5cclxuICAgICAgcmV0dXJuIGFjaGlldmVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0VXNlclByb2dyZXNzKHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxhbnk+IHtcclxuICAgIGF3YWl0IGNvbm5lY3RUb0RhdGFiYXNlKCk7XHJcblxyXG4gICAgbGV0IHVzZXJQcm9ncmVzcyA9IGF3YWl0IFVzZXJQcm9ncmVzcy5maW5kT25lKHsgdXNlcklkIH0pO1xyXG4gICAgaWYgKCF1c2VyUHJvZ3Jlc3MpIHtcclxuICAgICAgdXNlclByb2dyZXNzID0gYXdhaXQgVXNlclByb2dyZXNzLmNyZWF0ZSh7IHVzZXJJZCB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBhY2hpZXZlbWVudHMgPSBhd2FpdCBBY2hpZXZlbWVudC5maW5kKHsgdXNlcklkIH0pXHJcbiAgICAgIC5zb3J0KHsgdW5sb2NrZWRBdDogLTEgfSlcclxuICAgICAgLmxpbWl0KDEwKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAuLi51c2VyUHJvZ3Jlc3MudG9PYmplY3QoKSxcclxuICAgICAgcmVjZW50QWNoaWV2ZW1lbnRzOiBhY2hpZXZlbWVudHMsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZ2V0TGVhZGVyYm9hcmQobGltaXQ6IG51bWJlciA9IDEwKTogUHJvbWlzZTxhbnlbXT4ge1xyXG4gICAgYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKTtcclxuXHJcbiAgICByZXR1cm4gYXdhaXQgVXNlclByb2dyZXNzLmZpbmQoKVxyXG4gICAgICAucG9wdWxhdGUoXCJ1c2VySWRcIiwgXCJuYW1lXCIpXHJcbiAgICAgIC5zb3J0KHsgdG90YWxQb2ludHM6IC0xIH0pXHJcbiAgICAgIC5saW1pdChsaW1pdCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYWNoaWV2ZW1lbnRTeXN0ZW0gPSBBY2hpZXZlbWVudFN5c3RlbS5nZXRJbnN0YW5jZSgpO1xyXG4iXSwibmFtZXMiOlsiY29ubmVjdFRvRGF0YWJhc2UiLCJBY2hpZXZlbWVudCIsIlVzZXJQcm9ncmVzcyIsIkFjaGlldmVtZW50U3lzdGVtIiwiZ2V0SW5zdGFuY2UiLCJpbnN0YW5jZSIsImNoZWNrQWNoaWV2ZW1lbnRzIiwiY2hlY2siLCJuZXdBY2hpZXZlbWVudHMiLCJ1c2VySWQiLCJ1c2VyUHJvZ3Jlc3MiLCJmaW5kT25lIiwiY3JlYXRlIiwiYWNoaWV2ZW1lbnRzIiwiUHJvbWlzZSIsImFsbCIsImNoZWNrRm9jdXNTdHJlYWsiLCJjaGVja0xlYXJuaW5nU3RyZWFrIiwiY2hlY2tIaWdoU2NvcmUiLCJjaGVja0NvbXBsZXRpb24iLCJjaGVja0VuZ2FnZW1lbnQiLCJjaGVja0ltcHJvdmVtZW50IiwiZm9yRWFjaCIsImFjaGlldmVtZW50IiwicHVzaCIsImRhdGFUeXBlIiwidmFsdWUiLCJleGlzdGluZ0FjaGlldmVtZW50IiwiYWNoaWV2ZW1lbnRUeXBlIiwiZm9jdXNTdHJlYWsiLCJzYXZlIiwic3RyZWFrQ291bnQiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiaWNvbiIsInBvaW50cyIsIm1ldGFkYXRhIiwidG90YWxQb2ludHMiLCJfaWQiLCJsZWFybmluZ1N0cmVhayIsImN1cnJlbnRIaWdoIiwiaGlnaFNjb3JlcyIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJNYXRoIiwicm91bmQiLCJzY29yZSIsImNhdGVnb3J5IiwiY29udGVudElkIiwiY29tcGxldGVkQWN0aXZpdGllcyIsImNvbXBsZXRlZENvdW50IiwiZ2V0VXNlclByb2dyZXNzIiwiZmluZCIsInNvcnQiLCJ1bmxvY2tlZEF0IiwibGltaXQiLCJ0b09iamVjdCIsInJlY2VudEFjaGlldmVtZW50cyIsImdldExlYWRlcmJvYXJkIiwicG9wdWxhdGUiLCJhY2hpZXZlbWVudFN5c3RlbSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/gamification/achievements.ts\n");

/***/ }),

/***/ "(rsc)/./models/Achievement.ts":
/*!*******************************!*\
  !*** ./models/Achievement.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Achievement: () => (/* binding */ Achievement)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst AchievementSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    userId: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: \"User\",\n        required: true\n    },\n    achievementType: {\n        type: String,\n        enum: [\n            \"focus_streak\",\n            \"learning_streak\",\n            \"high_score\",\n            \"completion\",\n            \"engagement\",\n            \"improvement\"\n        ],\n        required: true\n    },\n    title: {\n        type: String,\n        required: true\n    },\n    description: {\n        type: String,\n        required: true\n    },\n    icon: {\n        type: String,\n        required: true\n    },\n    points: {\n        type: Number,\n        required: true,\n        default: 10\n    },\n    unlockedAt: {\n        type: Date,\n        default: Date.now\n    },\n    metadata: {\n        streakCount: Number,\n        score: Number,\n        contentId: String,\n        category: String\n    }\n}, {\n    timestamps: true\n});\n// Index for efficient queries\nAchievementSchema.index({\n    userId: 1,\n    unlockedAt: -1\n});\nAchievementSchema.index({\n    userId: 1,\n    achievementType: 1\n});\nconst Achievement = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).Achievement || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"Achievement\", AchievementSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9tb2RlbHMvQWNoaWV2ZW1lbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTREO0FBa0I1RCxNQUFNRSxvQkFBb0IsSUFBSUQsNENBQU1BLENBQWU7SUFDakRFLFFBQVE7UUFBRUMsTUFBTUgsNENBQU1BLENBQUNJLEtBQUssQ0FBQ0MsUUFBUTtRQUFFQyxLQUFLO1FBQVFDLFVBQVU7SUFBSztJQUNuRUMsaUJBQWlCO1FBQ2ZMLE1BQU1NO1FBQ05DLE1BQU07WUFBQztZQUFnQjtZQUFtQjtZQUFjO1lBQWM7WUFBYztTQUFjO1FBQ2xHSCxVQUFVO0lBQ1o7SUFDQUksT0FBTztRQUFFUixNQUFNTTtRQUFRRixVQUFVO0lBQUs7SUFDdENLLGFBQWE7UUFBRVQsTUFBTU07UUFBUUYsVUFBVTtJQUFLO0lBQzVDTSxNQUFNO1FBQUVWLE1BQU1NO1FBQVFGLFVBQVU7SUFBSztJQUNyQ08sUUFBUTtRQUFFWCxNQUFNWTtRQUFRUixVQUFVO1FBQU1TLFNBQVM7SUFBRztJQUNwREMsWUFBWTtRQUFFZCxNQUFNZTtRQUFNRixTQUFTRSxLQUFLQyxHQUFHO0lBQUM7SUFDNUNDLFVBQVU7UUFDUkMsYUFBYU47UUFDYk8sT0FBT1A7UUFDUFEsV0FBV2Q7UUFDWGUsVUFBVWY7SUFDWjtBQUNGLEdBQUc7SUFBRWdCLFlBQVk7QUFBSztBQUV0Qiw4QkFBOEI7QUFDOUJ4QixrQkFBa0J5QixLQUFLLENBQUM7SUFBRXhCLFFBQVE7SUFBR2UsWUFBWSxDQUFDO0FBQUU7QUFDcERoQixrQkFBa0J5QixLQUFLLENBQUM7SUFBRXhCLFFBQVE7SUFBR00saUJBQWlCO0FBQUU7QUFFakQsTUFBTW1CLGNBQW1DNUIsd0RBQWUsQ0FBQzRCLFdBQVcsSUFBSTVCLHFEQUFjLENBQWUsZUFBZUUsbUJBQWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9jdXNmbG93Ly4vbW9kZWxzL0FjaGlldmVtZW50LnRzPzllNmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlLCB7IFNjaGVtYSwgRG9jdW1lbnQsIE1vZGVsIH0gZnJvbSAnbW9uZ29vc2UnXHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElBY2hpZXZlbWVudCBleHRlbmRzIERvY3VtZW50IHtcclxuICB1c2VySWQ6IG1vbmdvb3NlLlR5cGVzLk9iamVjdElkXHJcbiAgYWNoaWV2ZW1lbnRUeXBlOiAnZm9jdXNfc3RyZWFrJyB8ICdsZWFybmluZ19zdHJlYWsnIHwgJ2hpZ2hfc2NvcmUnIHwgJ2NvbXBsZXRpb24nIHwgJ2VuZ2FnZW1lbnQnIHwgJ2ltcHJvdmVtZW50J1xyXG4gIHRpdGxlOiBzdHJpbmdcclxuICBkZXNjcmlwdGlvbjogc3RyaW5nXHJcbiAgaWNvbjogc3RyaW5nXHJcbiAgcG9pbnRzOiBudW1iZXJcclxuICB1bmxvY2tlZEF0OiBEYXRlXHJcbiAgbWV0YWRhdGE/OiB7XHJcbiAgICBzdHJlYWtDb3VudD86IG51bWJlclxyXG4gICAgc2NvcmU/OiBudW1iZXJcclxuICAgIGNvbnRlbnRJZD86IHN0cmluZ1xyXG4gICAgY2F0ZWdvcnk/OiBzdHJpbmdcclxuICB9XHJcbn1cclxuXHJcbmNvbnN0IEFjaGlldmVtZW50U2NoZW1hID0gbmV3IFNjaGVtYTxJQWNoaWV2ZW1lbnQ+KHtcclxuICB1c2VySWQ6IHsgdHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdVc2VyJywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICBhY2hpZXZlbWVudFR5cGU6IHsgXHJcbiAgICB0eXBlOiBTdHJpbmcsIFxyXG4gICAgZW51bTogWydmb2N1c19zdHJlYWsnLCAnbGVhcm5pbmdfc3RyZWFrJywgJ2hpZ2hfc2NvcmUnLCAnY29tcGxldGlvbicsICdlbmdhZ2VtZW50JywgJ2ltcHJvdmVtZW50J10sXHJcbiAgICByZXF1aXJlZDogdHJ1ZSBcclxuICB9LFxyXG4gIHRpdGxlOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcclxuICBkZXNjcmlwdGlvbjogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgaWNvbjogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXHJcbiAgcG9pbnRzOiB7IHR5cGU6IE51bWJlciwgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IDEwIH0sXHJcbiAgdW5sb2NrZWRBdDogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9LFxyXG4gIG1ldGFkYXRhOiB7XHJcbiAgICBzdHJlYWtDb3VudDogTnVtYmVyLFxyXG4gICAgc2NvcmU6IE51bWJlcixcclxuICAgIGNvbnRlbnRJZDogU3RyaW5nLFxyXG4gICAgY2F0ZWdvcnk6IFN0cmluZ1xyXG4gIH1cclxufSwgeyB0aW1lc3RhbXBzOiB0cnVlIH0pXHJcblxyXG4vLyBJbmRleCBmb3IgZWZmaWNpZW50IHF1ZXJpZXNcclxuQWNoaWV2ZW1lbnRTY2hlbWEuaW5kZXgoeyB1c2VySWQ6IDEsIHVubG9ja2VkQXQ6IC0xIH0pXHJcbkFjaGlldmVtZW50U2NoZW1hLmluZGV4KHsgdXNlcklkOiAxLCBhY2hpZXZlbWVudFR5cGU6IDEgfSlcclxuXHJcbmV4cG9ydCBjb25zdCBBY2hpZXZlbWVudDogTW9kZWw8SUFjaGlldmVtZW50PiA9IG1vbmdvb3NlLm1vZGVscy5BY2hpZXZlbWVudCB8fCBtb25nb29zZS5tb2RlbDxJQWNoaWV2ZW1lbnQ+KCdBY2hpZXZlbWVudCcsIEFjaGlldmVtZW50U2NoZW1hKVxyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJTY2hlbWEiLCJBY2hpZXZlbWVudFNjaGVtYSIsInVzZXJJZCIsInR5cGUiLCJUeXBlcyIsIk9iamVjdElkIiwicmVmIiwicmVxdWlyZWQiLCJhY2hpZXZlbWVudFR5cGUiLCJTdHJpbmciLCJlbnVtIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImljb24iLCJwb2ludHMiLCJOdW1iZXIiLCJkZWZhdWx0IiwidW5sb2NrZWRBdCIsIkRhdGUiLCJub3ciLCJtZXRhZGF0YSIsInN0cmVha0NvdW50Iiwic2NvcmUiLCJjb250ZW50SWQiLCJjYXRlZ29yeSIsInRpbWVzdGFtcHMiLCJpbmRleCIsIkFjaGlldmVtZW50IiwibW9kZWxzIiwibW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./models/Achievement.ts\n");

/***/ }),

/***/ "(rsc)/./models/UserProgress.ts":
/*!********************************!*\
  !*** ./models/UserProgress.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UserProgress: () => (/* binding */ UserProgress)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst UserProgressSchema = new mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema({\n    userId: {\n        type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n        ref: \"User\",\n        required: true,\n        unique: true\n    },\n    totalPoints: {\n        type: Number,\n        default: 0\n    },\n    level: {\n        type: Number,\n        default: 1\n    },\n    currentStreak: {\n        type: Number,\n        default: 0\n    },\n    longestStreak: {\n        type: Number,\n        default: 0\n    },\n    focusStreak: {\n        type: Number,\n        default: 0\n    },\n    learningStreak: {\n        type: Number,\n        default: 0\n    },\n    totalLearningTime: {\n        type: Number,\n        default: 0\n    },\n    completedActivities: {\n        type: Number,\n        default: 0\n    },\n    highScores: {\n        attention: {\n            type: Number,\n            default: 0\n        },\n        engagement: {\n            type: Number,\n            default: 0\n        },\n        performance: {\n            type: Number,\n            default: 0\n        }\n    },\n    badges: [\n        String\n    ],\n    lastActiveDate: {\n        type: Date,\n        default: Date.now\n    },\n    weeklyGoal: {\n        type: Number,\n        default: 300\n    },\n    dailyGoal: {\n        type: Number,\n        default: 60\n    },\n    achievements: [\n        {\n            type: mongoose__WEBPACK_IMPORTED_MODULE_0__.Schema.Types.ObjectId,\n            ref: \"Achievement\"\n        }\n    ]\n}, {\n    timestamps: true\n});\n// Index for efficient queries (avoid duplicate with unique field)\n// userId already unique, no need for additional index\nUserProgressSchema.index({\n    totalPoints: -1\n}); // For leaderboards\nconst UserProgress = (mongoose__WEBPACK_IMPORTED_MODULE_0___default().models).UserProgress || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"UserProgress\", UserProgressSchema);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9tb2RlbHMvVXNlclByb2dyZXNzLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2RDtBQXdCN0QsTUFBTUUscUJBQXFCLElBQUlELDRDQUFNQSxDQUNuQztJQUNFRSxRQUFRO1FBQ05DLE1BQU1ILDRDQUFNQSxDQUFDSSxLQUFLLENBQUNDLFFBQVE7UUFDM0JDLEtBQUs7UUFDTEMsVUFBVTtRQUNWQyxRQUFRO0lBQ1Y7SUFDQUMsYUFBYTtRQUFFTixNQUFNTztRQUFRQyxTQUFTO0lBQUU7SUFDeENDLE9BQU87UUFBRVQsTUFBTU87UUFBUUMsU0FBUztJQUFFO0lBQ2xDRSxlQUFlO1FBQUVWLE1BQU1PO1FBQVFDLFNBQVM7SUFBRTtJQUMxQ0csZUFBZTtRQUFFWCxNQUFNTztRQUFRQyxTQUFTO0lBQUU7SUFDMUNJLGFBQWE7UUFBRVosTUFBTU87UUFBUUMsU0FBUztJQUFFO0lBQ3hDSyxnQkFBZ0I7UUFBRWIsTUFBTU87UUFBUUMsU0FBUztJQUFFO0lBQzNDTSxtQkFBbUI7UUFBRWQsTUFBTU87UUFBUUMsU0FBUztJQUFFO0lBQzlDTyxxQkFBcUI7UUFBRWYsTUFBTU87UUFBUUMsU0FBUztJQUFFO0lBQ2hEUSxZQUFZO1FBQ1ZDLFdBQVc7WUFBRWpCLE1BQU1PO1lBQVFDLFNBQVM7UUFBRTtRQUN0Q1UsWUFBWTtZQUFFbEIsTUFBTU87WUFBUUMsU0FBUztRQUFFO1FBQ3ZDVyxhQUFhO1lBQUVuQixNQUFNTztZQUFRQyxTQUFTO1FBQUU7SUFDMUM7SUFDQVksUUFBUTtRQUFDQztLQUFPO0lBQ2hCQyxnQkFBZ0I7UUFBRXRCLE1BQU11QjtRQUFNZixTQUFTZSxLQUFLQyxHQUFHO0lBQUM7SUFDaERDLFlBQVk7UUFBRXpCLE1BQU1PO1FBQVFDLFNBQVM7SUFBSTtJQUN6Q2tCLFdBQVc7UUFBRTFCLE1BQU1PO1FBQVFDLFNBQVM7SUFBRztJQUN2Q21CLGNBQWM7UUFBQztZQUFFM0IsTUFBTUgsNENBQU1BLENBQUNJLEtBQUssQ0FBQ0MsUUFBUTtZQUFFQyxLQUFLO1FBQWM7S0FBRTtBQUNyRSxHQUNBO0lBQUV5QixZQUFZO0FBQUs7QUFHckIsa0VBQWtFO0FBQ2xFLHNEQUFzRDtBQUN0RDlCLG1CQUFtQitCLEtBQUssQ0FBQztJQUFFdkIsYUFBYSxDQUFDO0FBQUUsSUFBSSxtQkFBbUI7QUFFM0QsTUFBTXdCLGVBQ1hsQyx3REFBZSxDQUFDa0MsWUFBWSxJQUM1QmxDLHFEQUFjLENBQWdCLGdCQUFnQkUsb0JBQW9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZm9jdXNmbG93Ly4vbW9kZWxzL1VzZXJQcm9ncmVzcy50cz83MzIyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSwgeyBTY2hlbWEsIERvY3VtZW50LCBNb2RlbCB9IGZyb20gXCJtb25nb29zZVwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBJVXNlclByb2dyZXNzIGV4dGVuZHMgRG9jdW1lbnQge1xyXG4gIHVzZXJJZDogbW9uZ29vc2UuVHlwZXMuT2JqZWN0SWQ7XHJcbiAgdG90YWxQb2ludHM6IG51bWJlcjtcclxuICBsZXZlbDogbnVtYmVyO1xyXG4gIGN1cnJlbnRTdHJlYWs6IG51bWJlcjtcclxuICBsb25nZXN0U3RyZWFrOiBudW1iZXI7XHJcbiAgZm9jdXNTdHJlYWs6IG51bWJlcjtcclxuICBsZWFybmluZ1N0cmVhazogbnVtYmVyO1xyXG4gIHRvdGFsTGVhcm5pbmdUaW1lOiBudW1iZXI7IC8vIGluIG1pbnV0ZXNcclxuICBjb21wbGV0ZWRBY3Rpdml0aWVzOiBudW1iZXI7XHJcbiAgaGlnaFNjb3Jlczoge1xyXG4gICAgYXR0ZW50aW9uOiBudW1iZXI7XHJcbiAgICBlbmdhZ2VtZW50OiBudW1iZXI7XHJcbiAgICBwZXJmb3JtYW5jZTogbnVtYmVyO1xyXG4gIH07XHJcbiAgYmFkZ2VzOiBzdHJpbmdbXTtcclxuICBsYXN0QWN0aXZlRGF0ZTogRGF0ZTtcclxuICB3ZWVrbHlHb2FsOiBudW1iZXI7XHJcbiAgZGFpbHlHb2FsOiBudW1iZXI7XHJcbiAgYWNoaWV2ZW1lbnRzOiBtb25nb29zZS5UeXBlcy5PYmplY3RJZFtdO1xyXG59XHJcblxyXG5jb25zdCBVc2VyUHJvZ3Jlc3NTY2hlbWEgPSBuZXcgU2NoZW1hPElVc2VyUHJvZ3Jlc3M+KFxyXG4gIHtcclxuICAgIHVzZXJJZDoge1xyXG4gICAgICB0eXBlOiBTY2hlbWEuVHlwZXMuT2JqZWN0SWQsXHJcbiAgICAgIHJlZjogXCJVc2VyXCIsXHJcbiAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICB1bmlxdWU6IHRydWUsXHJcbiAgICB9LFxyXG4gICAgdG90YWxQb2ludHM6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXHJcbiAgICBsZXZlbDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDEgfSxcclxuICAgIGN1cnJlbnRTdHJlYWs6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXHJcbiAgICBsb25nZXN0U3RyZWFrOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxyXG4gICAgZm9jdXNTdHJlYWs6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAwIH0sXHJcbiAgICBsZWFybmluZ1N0cmVhazogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcclxuICAgIHRvdGFsTGVhcm5pbmdUaW1lOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxyXG4gICAgY29tcGxldGVkQWN0aXZpdGllczogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcclxuICAgIGhpZ2hTY29yZXM6IHtcclxuICAgICAgYXR0ZW50aW9uOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxyXG4gICAgICBlbmdhZ2VtZW50OiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogMCB9LFxyXG4gICAgICBwZXJmb3JtYW5jZTogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAgfSxcclxuICAgIH0sXHJcbiAgICBiYWRnZXM6IFtTdHJpbmddLFxyXG4gICAgbGFzdEFjdGl2ZURhdGU6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSxcclxuICAgIHdlZWtseUdvYWw6IHsgdHlwZTogTnVtYmVyLCBkZWZhdWx0OiAzMDAgfSwgLy8gNSBob3VycyBwZXIgd2Vla1xyXG4gICAgZGFpbHlHb2FsOiB7IHR5cGU6IE51bWJlciwgZGVmYXVsdDogNjAgfSwgLy8gMSBob3VyIHBlciBkYXlcclxuICAgIGFjaGlldmVtZW50czogW3sgdHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6IFwiQWNoaWV2ZW1lbnRcIiB9XSxcclxuICB9LFxyXG4gIHsgdGltZXN0YW1wczogdHJ1ZSB9XHJcbik7XHJcblxyXG4vLyBJbmRleCBmb3IgZWZmaWNpZW50IHF1ZXJpZXMgKGF2b2lkIGR1cGxpY2F0ZSB3aXRoIHVuaXF1ZSBmaWVsZClcclxuLy8gdXNlcklkIGFscmVhZHkgdW5pcXVlLCBubyBuZWVkIGZvciBhZGRpdGlvbmFsIGluZGV4XHJcblVzZXJQcm9ncmVzc1NjaGVtYS5pbmRleCh7IHRvdGFsUG9pbnRzOiAtMSB9KTsgLy8gRm9yIGxlYWRlcmJvYXJkc1xyXG5cclxuZXhwb3J0IGNvbnN0IFVzZXJQcm9ncmVzczogTW9kZWw8SVVzZXJQcm9ncmVzcz4gPVxyXG4gIG1vbmdvb3NlLm1vZGVscy5Vc2VyUHJvZ3Jlc3MgfHxcclxuICBtb25nb29zZS5tb2RlbDxJVXNlclByb2dyZXNzPihcIlVzZXJQcm9ncmVzc1wiLCBVc2VyUHJvZ3Jlc3NTY2hlbWEpO1xyXG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJTY2hlbWEiLCJVc2VyUHJvZ3Jlc3NTY2hlbWEiLCJ1c2VySWQiLCJ0eXBlIiwiVHlwZXMiLCJPYmplY3RJZCIsInJlZiIsInJlcXVpcmVkIiwidW5pcXVlIiwidG90YWxQb2ludHMiLCJOdW1iZXIiLCJkZWZhdWx0IiwibGV2ZWwiLCJjdXJyZW50U3RyZWFrIiwibG9uZ2VzdFN0cmVhayIsImZvY3VzU3RyZWFrIiwibGVhcm5pbmdTdHJlYWsiLCJ0b3RhbExlYXJuaW5nVGltZSIsImNvbXBsZXRlZEFjdGl2aXRpZXMiLCJoaWdoU2NvcmVzIiwiYXR0ZW50aW9uIiwiZW5nYWdlbWVudCIsInBlcmZvcm1hbmNlIiwiYmFkZ2VzIiwiU3RyaW5nIiwibGFzdEFjdGl2ZURhdGUiLCJEYXRlIiwibm93Iiwid2Vla2x5R29hbCIsImRhaWx5R29hbCIsImFjaGlldmVtZW50cyIsInRpbWVzdGFtcHMiLCJpbmRleCIsIlVzZXJQcm9ncmVzcyIsIm1vZGVscyIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./models/UserProgress.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/semver","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgamification%2Fprogress%2Froute&page=%2Fapi%2Fgamification%2Fprogress%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgamification%2Fprogress%2Froute.ts&appDir=D%3A%5Cmini_adhd1%5Cmini_adhd%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cmini_adhd1%5Cmini_adhd&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();